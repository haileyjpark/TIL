## 싱글톤 패턴 (Singleton Pattern)

- 애플리케이션이 시작될 때, 어떤 클래스가 최초 한 번만 메모리를 할당하고 해당 메모리에 인스턴스를 만들어 사용하는 패턴
- 인스턴스가 필요할 때, 똑같은 인스턴스를 만들지 않고 기존의 인스턴스를 활용한다.
- 생성자가 여러 번 호출되어도, 실제로는 생성되는 객체가 하나이며 최초로 생성된 이후에 호출된 생성자는 이미 생성한 객체를 반환시키도록 만드는 것이다.
### 장점
  - 메모리 낭비 방지 : 객체 생성할 때마다 메모리를 할당받아야 하는데, 한번의 new를 통해 객체를 생성한다면 메모리 낭비를 방지할 수 있다. 직접 인스턴스화를 하게 되면 언제 어느 시점에 메모리를 관리해야 할지 결정하기 어렵다. (필요하지 않을 때 인스턴스를 삭제 할 필요가 없다.)
  - 싱글톤으로 구현한 인스턴스는 전역이므로, 다른 클래스의 인스턴스들이 데이터를 공유하는 것이 가능하다.
### 단점
  - `개방 - 폐쇄 원칙` 위배 : 객체 지향 설계 원칙 중에 개방-폐쇄 원칙이라는 것이 있음. 만약 싱글톤 인스턴스가 혼자 너무 많은 일을 하거나, 많은 데이터를 공유시키면 다른 클래스들 간의 결합도가 높아지게 되는데, 이 때 개방-폐쇄 원칙이 위배된다. 결합도가 높아지면 유지보수가 힘들고 테스트도 원활하게 진행할 수 없다.
  - 멀티스레드 환경에서 동기화 처리를 하지 않았을 때, 인스턴스가 2개 생성될 수 있다 → Node.js 는 싱글스레드로 작동하기 때문에 각각의 클래스 인스턴스들이 싱글톤으로 관리가 되어도 성능상에 문제가 없고 동시에 안전하다. (반드시 싱글톤이 필요한 상황이 아니면 지양하는 것이 좋다고 함.)
    
### 사용하는 경우
  - 데이터베이스에서 커넥션풀, 스레드풀, 캐시, 로그 기록 객체 등 → 오직 하나의 인스턴스만 생성되어야 하는 경우
  - 안드로이드 앱 : 각 액티비티들이나 클래스마다 주요 클래스를 하나하나 전달하는 게 번거롭기 때문에 싱글톤 클래스를 만들어 어디서든 접근하도록 설계
  - 인스턴스가 절대적으로 한 개만 존재하는 것을 보증하고 싶을 때 사용

### 고려해야할 점 : 동시성(Concurrency)
  - 시스템 전반에서 단 하나의 인스턴스만 사용된다는 것 → 동시에 시스템에서 접근할 수 있다는 뜻
  - ‘만약 중간에 해당 객체의 값이 바뀐다면, 다른 스레드에서도 잘 적용될 수 있는가?’와 같은 동시성 문제를 해결할 수 있어야 함
